#!/usr/bin/python
import sys, os
import optparse
import urllib2

# add path of burst library
burst_lib = os.path.abspath(os.path.join(os.path.dirname(os.path.abspath(sys.argv[0])), '../lib'))
sys.path.append(burst_lib)
import pynaoqi

# parse command line arguments
parser = optparse.OptionParser()
parser.add_option('', '--ip', action='store', dest='ip', default='localhost')
parser.add_option('', '--port', action='store', dest='port', default='9560')
options, rest = parser.parse_args()

# connect to naoqi
url = 'http://%s:%s/' % (options.ip, options.port)
print "connecting to", url
try:
    con = pynaoqi.NaoQiConnection(url)
except urllib2.URLError, e:
    print "error connecting: %s" % e
    raise SystemExit

# start ipython shell
my_ns = dict(
    con = con,
    pynaoqi = pynaoqi)
import IPython.ipapi
print "Pynaoqi shell - con object holds all the modules, methods, help!"
IPython.ipapi.launch_new_instance(my_ns)

